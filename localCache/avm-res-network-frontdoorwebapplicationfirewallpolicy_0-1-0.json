{
  "module": {
    "name": "avm-res-network-frontdoorwebapplicationfirewallpolicy",
    "display_name": "Front Door Web Application Firewall (WAF) Policy",
    "terraform_registry_url": "https://registry.terraform.io/modules/Azure/avm-res-network-frontdoorwebapplicationfirewallpolicy/azurerm/0.1.0",
    "source_code_url": "https://github.com/Azure/terraform-azurerm-avm-res-network-frontdoorwebapplicationfirewallpolicy",
    "version": "0.1.0",
    "description": "Front Door Web Application Firewall (WAF) Policy",
    "resources": [
      "azurerm_cdn_frontdoor_firewall_policy.waf_policy",
      "azurerm_management_lock.this",
      "azurerm_role_assignment.this_virtual_machine",
      "modtm_telemetry.telemetry",
      "random_uuid.telemetry",
      "azurerm_client_config.telemetry",
      "modtm_module_source.telemetry"
    ],
    "inputs": [
      {
        "name": "enable_telemetry",
        "type": "bool",
        "required": false
      },
      {
        "name": "managed_rules",
        "type": "list(object({\n    type    = string                    # (Required) The type of the managed rule. Possible values are \"DefaultRuleSet\" and \"Microsoft_DefaultRuleSet\", \"BotProtection\", \"Microsoft_BotManagerRuleSet\"\n    action  = string                    # (Required) The action to perform for all DRS rules when the managed rule is matched or when the anomaly score is 5 or greater depending on which version of the DRS you are using. Possible values include Allow, Log, Block, and Redirect\n    version = string                    # (Required) The version of the managed rule set to use. Possible values depends on which DRS type you are using, for the DefaultRuleSet type the possible values include 1.0 or preview-0.1. For Microsoft_DefaultRuleSet the possible values include 1.1, 2.0 or 2.1. For BotProtection the value must be preview-0.1 and for Microsoft_BotManagerRuleSet the value must be 1.0.\n    exclusions = optional(list(object({ # (Optional) A list of Exclusion blocks.\n      match_variable = string           # (Required) (Required) The variable type to be excluded. Possible values are QueryStringArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames, RequestBodyJsonArgNames. Important: RequestBodyJsonArgNames is only available on Default Rule Set (DRS) 2.0 or later\n      selector       = string           # (Required) Selector for the value in the match_variable attribute this exclusion applies to. selector must be set to * if operator is set to EqualsAny.\n      operator       = string           # (Required) Comparison operator to apply to the selector when specifying which elements in the collection this exclusion applies to. Possible values are: Equals, Contains, StartsWith, EndsWith, EqualsAny\n    })))\n\n    overrides = optional(list(object({      # (Optional) A list of Override blocks.\n      rule_group_name = string              # (Required) The name of the rule group to override.\n      rules = optional(list(object({        # (Optional) A list of Rule blocks.\n        rule_id = string                    # (Required) Identifier for the managed rule.\n        enabled = optional(bool, false)     # (Optional) Is the managed rule override enabled or disabled. Defaults to false\n        action  = string                    # (Required) The action to be applied when the managed rule matches or when the anomaly score is 5 or greater. Possible values for DRS 1.1 and below are Allow, Log, Block, and Redirect. For DRS 2.0 and above the possible values are Log or AnomalyScoring.\n        exclusions = optional(list(object({ # (Optional) A list of Exclusion blocks.\n          match_variable = string           # (Required) (Required) The variable type to be excluded. Possible values are QueryStringArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames, RequestBodyJsonArgNames. Important: RequestBodyJsonArgNames is only available on Default Rule Set (DRS) 2.0 or later\n          selector       = string           # (Required) Selector for the value in the match_variable attribute this exclusion applies to. selector must be set to * if operator is set to EqualsAny.\n          operator       = string           # (Required) Comparison operator to apply to the selector when specifying which elements in the collection this exclusion applies to. Possible values are: Equals, Contains, StartsWith, EndsWith, EqualsAny\n        })))\n      })))\n\n      exclusions = optional(list(object({ # (Optional) A list of Exclusion blocks.\n        match_variable = string           # (Required) (Required) The variable type to be excluded. Possible values are QueryStringArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames, RequestBodyJsonArgNames. Important: RequestBodyJsonArgNames is only available on Default Rule Set (DRS) 2.0 or later\n        selector       = string           # (Required) Selector for the value in the match_variable attribute this exclusion applies to. selector must be set to * if operator is set to EqualsAny.\n        operator       = string           # (Required) Comparison operator to apply to the selector when specifying which elements in the collection this exclusion applies to. Possible values are: Equals, Contains, StartsWith, EndsWith, EqualsAny\n      })))\n\n    })))\n  }))",
        "required": false
      },
      {
        "name": "redirect_url",
        "type": "string",
        "required": false
      },
      {
        "name": "request_body_check_enabled",
        "type": "bool",
        "required": false
      },
      {
        "name": "tags",
        "type": "map(string)",
        "required": false
      },
      {
        "name": "sku_name",
        "type": "string",
        "required": true
      },
      {
        "name": "custom_block_response_body",
        "type": "string",
        "required": false
      },
      {
        "name": "mode",
        "type": "string",
        "required": true
      },
      {
        "name": "custom_block_response_status_code",
        "type": "number",
        "required": false
      },
      {
        "name": "enabled",
        "type": "bool",
        "required": false
      },
      {
        "name": "role_assignments",
        "type": "map(object({\n    role_definition_id_or_name             = string\n    principal_id                           = string\n    condition                              = optional(string, null)\n    condition_version                      = optional(string, null)\n    delegated_managed_identity_resource_id = optional(string, null)\n    description                            = optional(string, null)\n    principal_type                         = optional(string, null)\n    skip_service_principal_aad_check       = optional(bool, false)\n\n    }\n  }))",
        "required": false
      },
      {
        "name": "name",
        "type": "string",
        "required": true
      },
      {
        "name": "resource_group_name",
        "type": "string",
        "required": true
      },
      {
        "name": "custom_rules",
        "type": "list(object({\n    name                           = string               # Required\n    priority                       = number               # Required\n    type                           = string               # Must be \"MatchRule\" or \"RateLimitRule\"\n    action                         = string               # Must be \"Allow\", \"Block\", \"Log\", \"Redirect\"\n    enabled                        = optional(bool, true) # Default is true\n    rate_limit_duration_in_minutes = optional(number, 1)  # Default is 1\n    rate_limit_threshold           = optional(number, 10) # Default is 10\n    match_conditions = list(object({\n      match_variable     = string                     #Required, must be one of these values  \"Cookies\", \"PostArgs\", \"QueryStrings\", \"RemoteAddr\", \"RequestBody\" \"RequestHeader\", \"RequestMethod\", \"RequestUri\", \"SocketAddr\"\n      operator           = string                     #(Required) Comparison type to use for matching with the variable value. Possible values are Any, BeginsWith, Contains, EndsWith, Equal, GeoMatch, GreaterThan, GreaterThanOrEqual, IPMatch, LessThan, LessThanOrEqual, or RegEx\n      match_values       = list(string)               # Required Up to 600 possible values to match. Limit is in total across all match_condition blocks and match_values arguments. String value itself can be up to 256 characters in length\n      selector           = optional(string, null)     # (Optional) Match against a specific key if the match_variable is QueryString, PostArgs, RequestHeader or Cookies.\n      negation_condition = optional(bool, null)       #(Optional) Should the result of the condition be negated.\n      transforms         = optional(list(string), []) #(Optional) Up to 5 transforms to apply. Possible values are Lowercase, RemoveNulls, Trim, Uppercase, URLDecode, or URLEncode.\n    }))\n  }))",
        "required": false
      },
      {
        "name": "lock",
        "type": "object({\n    kind = string\n    name = optional(string, null)\n  })",
        "required": false
      }
    ],
    "outputs": [
      {
        "name": "resource",
        "description": "This is the full output for the resource.",
        "sensitive": false
      },
      {
        "name": "resource_id",
        "description": "The ID of the WAF Policy.",
        "sensitive": false
      }
    ]
  }
}